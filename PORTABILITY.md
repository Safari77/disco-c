* This is intended to be portable.
* I've tested things with std=c99
* if you don't have bool, you can redefine it yourself
* if you don't have uint8_t, you can redefine it yourself